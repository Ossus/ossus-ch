function setupCircus(){var t=$("#circus");for(p in _data){var e=_data[p],i="name"in e?e.name:p,r=$("<li/>"),n="url"in e?e.url:"",a=$("<a/>").attr("href",n),s=$("<img/>").attr("src","images/"+p+".png").attr("srcset","images/"+p+"@2x.png 2x").attr("alt",p),c=$("<span/>").text(i);a.append(s).append(c),r.append(a),a.click(function(t){return t.stopPropagation(),!0});var l="desc"in e?e.desc:null;l&&(r.on("mouseover",function(t,e,i){return function(r){if(!$("#"+t).is("*")){var n=$("<div/>",{id:t}).addClass("detail").html("<h1>"+e+"</h1>"+i);$("#full").addClass("blank").append(n)}}}(p,i,l)),r.on("mouseout",function(t){return function(e){$("#"+t).remove(),$("#full").removeClass("blank")}}(p))),t.append(r),$(window).width()>=_w_desktop&&circlePutItemToPositionAtAngle(r,90)}}function toggleCircus(){var t=$(window).width(),e=$("#full"),i=$("#circus");if(i.parent().show(),_w_desktop>t)return void(e.hasClass("shown")?hideCircusOnPhones():showCircusOnPhones());var r=i.find("li"),n=360/r.length,a=-110,s=!e.hasClass("shown");if(s||(n=0,a=90),r.each(function(t,e){circleItemTo($(e),a+t*n,i)}),e.toggleClass("shown"),s){var c=300/$(window).width()*100;$("#full").css("background-size",c+"%")}else $("#full").css("background-size","40%")}function showCircusOnPhones(){$("#circus-wrap").show(),$("#full").addClass("shown")}function hideCircusOnPhones(){$("#full").removeClass("shown"),window.setTimeout(function(){$("#circus-wrap").hide()},1e3)}function circleItemTo(t,e,i,r,n){var a=t.attr("id");a||(a="circle"+(new Date).getTime()+Math.round(1e5*Math.random()),t.attr("id",a));var s=parseInt(t.css("left"))+t.outerWidth()/2,c=parseInt(t.css("top"))+t.outerHeight()/2,l=s-i.innerWidth()/2,o=c-i.innerHeight()/2,d=Math.atan2(o,l),h=Math.ceil(Math.sqrt(l*l+o*o));e%=360,e>180?e-=360:-180>e&&(e+=360);for(var u=deg2rad(e);d>u;)u+=2*Math.PI;if(Math.round(d/.017453)==e)return!1;t.css("position","absolute"),r=r?r:0;var w=(new Date).getTime(),f=n?n:_circleState.duration,m={view:t,width:t.width(),height:t.height(),box:{width:i.innerWidth(),height:i.innerHeight()},radius:h,start:{rad:d,time:w+r},end:{rad:u,time:w+r+f},duration:f,interval:null};return _circleState.items[a]=m,_circleState.interval||(_circleState.interval=window.setInterval(_circleView,20)),!0}function _circleView(){var t=_circleState;if(t){var e=(new Date).getTime(),i=0;for(var r in _circleState.items){var n=_circleState.items[r];if(!(n.start.time>e)){var a=0;if(i=Math.max(n.end.time,i),e<n.end.time){var s=(e-n.start.time)/n.duration,c=s;n.linear||(c=s*s*3-s*s*s*2),a=n.start.rad+c*(n.end.rad-n.start.rad)}else a=n.end.rad,delete _circleState.items[r];_circlePutItem(n.view,a,n.width,n.height,n.box)}}e>i&&(window.clearInterval(_circleState.interval),_circleState.interval=null,_circleState.items={})}}function circlePutItemToPositionAtAngle(t,e){var i=t.offsetParent(),r={width:i.innerWidth(),height:i.innerHeight()};_circlePutItem(t,deg2rad(e),t.width(),t.height(),r)}function _circlePutItem(t,e,i,r,n){var a={x:n.width/2,y:n.height/2},s=Math.sin(e)*a.x,c=Math.cos(e)*a.x,l=a.x+c-i/2,o=a.y+s-r/2;n.width!=n.height,t.css("top",o).css("left",l)}function deg2rad(t){return.017453*t}var _w_tablet=460,_w_desktop=980,_circleState={items:[],interval:null,duration:1e3};